\section{Optimality Systems and \textit{a posteriori} Error Estimates}

\begin{frame}{Optimality Conditions}
    \begin{block}{First Order Necessary Conditions, c.f.~\cite{Keil2021}}
        For any locally optimal pair $(u, \mu)$ there exists an optimal dual variable $p \in V$ such that the following conditions are satisfied
        \begin{align*}
            a_\mu(u, v) &= l_\mu(v) &&\forall v \in V \\
            a_\mu(u, p) &= \partial_u \mathcal{J}(u, \mu)[v] &&\forall v \in V \\
            0 &\leq (\nabla_\mu \mathcal{J}(u, \mu) + \nabla_\mu l_\mu(p) - \nabla_\mu a_\mu(u, p)) \cdot (\nu - \mu) &&\forall \nu \in \mathcal{P}.
        \end{align*}
    \end{block}
\end{frame}

\begin{frame}{Primal and Dual Equations}
    \begin{block}{Primal Residual}
        For $u, v \in V, \mu \in \mathcal{P}$ we define
        \begin{equation*}
            Res_\mu^{pr}(u)[v] := l_\mu(v) - a_\mu(u, v).
        \end{equation*}
    \end{block}
    \begin{block}{Dual Residual}
        For $u, v, p \in V, \mu \in \mathcal{P}$ we define
        \begin{equation*}
            Res_\mu^{du}(u, p)[v] := j_\mu(v) + 2 k_\mu(v, u) - a_\mu(v, p).
        \end{equation*}
    \end{block}
    \textbf{Lagrangian:} $\mathcal{L}(u, \mu, p) := \mathcal{J}(u, \mu) - Res_\mu^{pr}(u)[p]$
\end{frame}

\begin{frame}{Optimality Conditions --- Standard Approach}
    \only<1, 2>{
        \begin{block}{Reduced Functional}
            For $\mu \in \mathcal{P}$ we define
            \begin{equation*}
                J_N(\mu) := \mathcal{J}(u_{N, \mu}, \mu),
            \end{equation*}
            where $u_{N, \mu}$ defines the reduced solution for $\mu$.
        \end{block}
    }
    \only<2, 3, 4>{
        Then the gradient for all $p \in V_N^{du}$ is
        \begin{equation*}
            {\left( \nabla_\mu J_N(\mu) \right)}_i = \partial_u \mathcal{L}(u_{N, \mu}, \mu, p)[d_{\mu_i} u_{N, \mu}] + \partial_{\mu_i} \mathcal{L}(u_{N, \mu}, \mu, p) \quad \forall p \in V_N^{du}.
        \end{equation*}
    }
    \only<3, 4>{
        \begin{block}{Inexact Gradient}
            For better numerical results later on, we define
            \begin{equation*}
                {\left( \tilde{\nabla}_\mu J_N(\mu) \right)}_i := \partial_{\mu_i} \mathcal{J}(u_{N, \mu}, \mu) + \partial_{\mu_i} Res_\mu^{pr}(u_{N, \mu})[p_{N, \mu}].
            \end{equation*}
        \end{block}
    }
    \only<4>{
        \begin{equation*}
            \Rightarrow {\left( \nabla_\mu J_N(\mu) \right)}_i = \partial_u \mathcal{L}(u_{N, \mu}, \mu, p_{N, \mu})[d_{\mu_i} u_{N, \mu}] + {\left( \tilde{\nabla}_\mu J_N(\mu) \right)}_i
        \end{equation*}
    }
\end{frame}

\begin{frame}{Optimality Conditions --- NCD-Corrected Approach}
    % todo add ncd approach equations and comparison to inexact gradient and standard optimality conditions
    asdf
\end{frame}

\begin{frame}{\textit{a posteriori} Error Estimates}
    % todo give short overview, highlight paper and handout
    zxcv
\end{frame}